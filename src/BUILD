cc_library(
    name = "SuperFastDB",
    srcs = [
        "common/Catalog.cpp",
        "common/Database.cpp",
        "common/Type.cpp",
        "execution/AggregatorOp.cpp",
        "execution/OpType.cpp",
        "execution/logical_plan/logical_plan.cpp",
        "parser.cpp",
        "storage/BufferPool.cpp",
        "storage/HeapFile.cpp",
        "storage/HeapFileIterator.cpp",
        "storage/HeapPage.cpp",
        "storage/HeapPageIterator.cpp",
        "storage/IntField.cpp",
        "storage/Page.cpp",
        "storage/StringField.cpp",
    ],
    hdrs = [
        "common/Catalog.hpp",
        "common/Database.hpp",
        "common/Permissions.hpp",
        "common/Type.hpp",
        "execution/Aggregate.hpp",
        "execution/Aggregator.hpp",
        "execution/AggregatorOp.hpp",
        "execution/Filter.hpp",
        "execution/IntegerAggregator.hpp",
        "execution/Join.hpp",
        "execution/JoinPredicate.hpp",
        "execution/OpIterator.hpp",
        "execution/OpType.hpp",
        "execution/Operator.hpp",
        "execution/OrderBy.hpp",
        "execution/Predicate.hpp",
        "execution/SeqScan.hpp",
        "execution/StringAggregator.hpp",
        "execution/logical_plan/column_ref.hpp",
        "execution/logical_plan/filter_node.hpp",
        "execution/logical_plan/join_node.hpp",
        "execution/logical_plan/logical_plan.hpp",
        "execution/logical_plan/scan_node.hpp",
        "execution/logical_plan/select_node.hpp",
        "parser.hpp",
        "storage/BufferPool.hpp",
        "storage/DbFile.hpp",
        "storage/DbFileIterator.hpp",
        "storage/Field.hpp",
        "storage/HeapFile.hpp",
        "storage/HeapFileIterator.hpp",
        "storage/HeapPage.hpp",
        "storage/HeapPageId.hpp",
        "storage/HeapPageIterator.hpp",
        "storage/IntField.hpp",
        "storage/Page.hpp",
        "storage/PageId.hpp",
        "storage/PageIterator.hpp",
        "storage/RecordId.hpp",
        "storage/StringField.hpp",
        "storage/Tuple.hpp",
        "storage/TupleDesc.hpp",
        "transaction/TransactionId.hpp",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//:hsql",
        "//src/utils",
        "@com_github_google_glog//:glog",
        "@com_google_absl//absl/container:flat_hash_map",
        "@com_google_absl//absl/status",
        "@com_google_absl//absl/status:statusor",
        "@com_google_absl//absl/strings",
    ],
)

cc_binary(
    name = "main",
    srcs = [
        "main.cpp",
    ],
    data = [
        "//data",
    ],
    deps = [
        "SuperFastDB",
        "@com_github_gflags_gflags//:gflags",
        "@com_github_google_glog//:glog",
        "@com_google_absl//absl/status",
        "@com_google_absl//absl/strings",
    ],
)

cc_test(
    name = "parser_test",
    srcs = ["parser_test.cpp"],
    data = [
        "//data",
    ],
    deps = [
        "SuperFastDB",
        "@com_google_googletest//:gtest_main",
    ],
)
